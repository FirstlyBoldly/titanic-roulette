<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Titanic Roulette</title>
    <link rel="shortcut icon" href="favicon.png" type="image/x-icon">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap">
    <script type="module" src="main.js" defer></script>
</head>
<body class="main-hull-background">
    <h1 class="main-title">Titanic Roulette</h1>
    <main class="content-wrapper">
        <form id="prediction-form" action="/" method="post">
            <div id="slide-container">
                <div class="slide" id="slide-embark">
                    <fieldset class="embark-selection-group">
                        <legend>Embarkation Port</legend>
                        <figure class="embarkation-map-container">
                            <img src="images/embarkation_map.jpeg"
                                alt="Map showing Queenstown, Southampton, and Cherbourg. Click on a city to select your embarkation port."
                                class="embarkation-map-image"
                                id="embarkation-map-image">
                            <div class="embark-hotspot" id="embark-Q" data-embark="Q">Q</div>
                            <div class="embark-hotspot" id="embark-S" data-embark="S">S</div>
                            <div class="embark-hotspot" id="embark-C" data-embark="C">C</div>
                        </figure>

                        <div class="form-group embark-select-option">
                            <label for="embark_port_select">Or Choose from List:</label>
                            <select id="embark_port_select" name="embark_port" required>
                                <option value="">-- Select Port --</option>
                                <option value="Q">Queenstown</option>
                                <option value="S">Southampton</option>
                                <option value="C">Cherbourg</option>
                            </select>
                        </div>
                    </fieldset>
                </div>

                <div class="slide" id="slide-deck">
                    <fieldset class="deck-selection-group">
                        <legend>Deck Level</legend>
                        <figure class="titanic-cross-section-container">
                            <img src="images/titanic_crosssection.jpeg"
                                alt="Titanic Cross-Section showing Decks A through G. Click on a deck to select your level."
                                class="titanic-cross-section-image"
                                id="titanic-deck-image">
                            <div class="deck-hotspot" id="deck-A" data-deck="A">A</div>
                            <div class="deck-hotspot" id="deck-B" data-deck="B">B</div>
                            <div class="deck-hotspot" id="deck-C" data-deck="C">C</div>
                            <div class="deck-hotspot" id="deck-D" data-deck="D">D</div>
                            <div class="deck-hotspot" id="deck-E" data-deck="E">E</div>
                            <div class="deck-hotspot" id="deck-F" data-deck="F">F</div>
                            <div class="deck-hotspot" id="deck-G" data-deck="G">G</div>
                        </figure>

                        <div class="form-group deck-select-option">
                            <label for="deck_level_select">Or Choose from List:</label>
                            <select id="deck_level_select" name="deck_level" required>
                                <option value="">-- Select Deck --</option>
                                <option value="A">Deck A</option>
                                <option value="B">Deck B</option>
                                <option value="C">Deck C</option>
                                <option value="D">Deck D</option>
                                <option value="E">Deck E</option>
                                <option value="F">Deck F</option>
                                <option value="G">Deck G</option>
                            </select>
                        </div>
                    </fieldset>
                </div>

                <div class="slide" id="slide-passenger-info">
                    <fieldset class="form-container">
                        <legend>Passenger</legend>
                        <div class="form-group">
                            <label for="sex">Sex:</label>
                            <select id="sex" name="sex" required>
                                <option value="">-- Select --</option>
                                <option value="male">Male</option>
                                <option value="female">Female</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="pclass">Passenger Class (1, 2, or 3):</label>
                            <input type="number" id="pclass" name="pclass" min="1" max="3" required>
                        </div>
                        <div class="form-group">
                            <label for="is_alone">Traveling Alone? (0 for No, 1 for Yes):</label>
                            <input type="number" id="is_alone" name="is_alone" min="0" max="1" required>
                        </div>
                        <div class="form-group">
                            <label for="age">Age:</label>
                            <input type="number" id="age" name="age" step="1" required>
                        </div>
                        <div class="form-group">
                            <label for="fare">Fare (Ticket Price):</label>
                            <input type="number" id="fare" name="fare" step="0.01" required>
                        </div>
                    </fieldset>
                    <button type="submit" class="predict-button" id="predict-button">Predict Survival</button>
                </div>
            </div>

            <div class="form-navigation">
                <button type="button" class="nav-button" id="prev-button" style="display:none;">Previous</button>
                <button type="button" class="nav-button" id="next-button">Next</button>
            </div>
        </form>

        <div id="animation-stage">
            <div id="survive-container"></div>
            <div id="not-survive-container"></div>
        </div>
        {% if prediction_text %}
            <div id="prediction-result" class="{% if prediction_value %}survived-text{% else %}not-survived-text{% endif %}">
                <p>{{ prediction_text }}</p>
                {% if confidence_level %}
                    <p>Confidence: {{ confidence_level }}</p>
                {% endif %}
            </div>
            <button type="reset" class="retry-button">Retry</button>
        {% endif %}
    </main>

    <audio id="drum-roll-sound" src="sounds/drum_roll.mp3" preload="auto"></audio>
    <audio id="survive-sound" src="sounds/survived.mp3" preload="auto"></audio>
    <audio id="not-survive-sound" src="sounds/not_survived.mp3" preload="auto"></audio>

    {% if prediction_value is not none %}
        <script>
            window.predictionValue = {{ prediction_value | tojson }};
        </script>
    {% else %}
        <script>
            window.predictionValue = null;
        </script>
    {% endif %}
</body>
</html>
